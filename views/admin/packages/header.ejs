<%- include('../navbar.ejs') %>
  <style>
.form-container{
    max-width:700px;
    margin:30px auto;
    background:#fff;
    padding:25px;
    border-radius:10px;
    box-shadow:0 5px 15px rgba(0,0,0,.1);
}
</style>

<div class="container mt-4">

<!-- Alerts -->
<% if (success) { %>
<div class="alert alert-success alert-dismissible fade show">
    <%= success %>
    <button class="btn-close" data-bs-dismiss="alert"></button>
</div>
<% } %>

<% if (error) { %>
<div class="alert alert-danger alert-dismissible fade show">
    <%= error %>
    <button class="btn-close" data-bs-dismiss="alert"></button>
</div>
<% } %>

<!-- Page Header -->
<div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="fw-bold">Header Packages</h4>
</div>

<!-- âœ… ADD HEADER FORM (MODAL REMOVED) -->
<div class="form-container">

<h5 class="mb-3 fw-bold">Add Header Package</h5>

<form action="/admin/save_header_package" method="POST" enctype="multipart/form-data">

    <div class="mb-3">
        <label class="form-label fw-bold">Background Image</label>
        <input type="file" name="bg_image" id="bg_image" class="form-control" required>
        <img id="previewImg" class="mt-2 rounded" width="120" style="display:none;">
    </div>

    <div class="mb-3">
        <label class="form-label fw-bold">Title</label>
        <input type="text" name="title" class="form-control" required>
    </div>

    <div class="mb-3">
        <label class="form-label fw-bold">Description</label>
        <textarea name="description" class="form-control" rows="3" required></textarea>
    </div>

    <button type="submit" class="btn btn-primary">
        <i class="bi bi-save"></i> Save Header
    </button>

</form>
</div>

<!-- TABLE -->
<table class="table table-bordered table-hover align-middle text-center mt-4">
<thead class="table-dark">
<tr>
    <th>#</th>
    <th>Image</th>
    <th>Title</th>
    <th>Description</th>
    <th width="120">Action</th>
</tr>
</thead>

<tbody>
<% if (header && header.length > 0) { %>
<% header.forEach((row,index)=>{ %>
<tr>
    <td><%= index+1 %></td>
    <td>
        <img src="/upload/packages/<%= row.bg_image %>"
             width="80" height="50"
             class="rounded" style="object-fit:cover;">
    </td>
    <td><%= row.title %></td>
    <td><%= row.description %></td>
    <td>
        <a href="/admin/edit_header/<%= row.id %>" class="btn btn-sm btn-outline-warning">
            <i class="bi bi-pencil"></i>
        </a>

        <a href="/admin/delete_header_package/<%= row.id %>"
           class="btn btn-sm btn-outline-danger"
           onclick="return confirm('Are you sure?')">
            <i class="bi bi-trash"></i>
        </a>
    </td>
</tr>
<% }) %>
<% } else { %>
<tr>
    <td colspan="5">No data found</td>
</tr>
<% } %>
</tbody>
</table>

</div>

<script>
document.getElementById("bg_image").addEventListener("change",function(){
    const file=this.files[0];
    const preview=document.getElementById("previewImg");
    if(file){
        preview.src=URL.createObjectURL(file);
        preview.style.display="block";
    }
});
</script>

<%- include('../footer.ejs') %>